@model Travel_Request_System_EF.Models.ATQuotation

@{
    ViewBag.Title = "AddATQuotation";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>AddATQuotation</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>ATQuotation</h4>
        <hr />
        @Html.ValidationSummary(true, null, new { @class = "text-danger" })

        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Ticket Class</label>
                    <div class="col-sm-9 btn-danger">
                        @Html.EditorFor(model => model.TicketClass, new { htmlAttributes = new { @class = "form-control" } })
                        @*@Html.ValidationMessageFor(model => model.CurrencyID, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Airlines</label>
                    <div class="col-sm-9">
                        @Html.EditorFor(model => model.Airlines, new { htmlAttributes = new { @class = "form-control" } })
                        @*@Html.ValidationMessageFor(model => model.DailyAllowance, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Port Of Origin</label>
                    <div class="col-sm-9 btn-danger">
                        @Html.DropDownListFor(model => model.OriginID, ((IEnumerable<Travel_Request_System_EF.Models.City>)ViewBag.Cities).Select(m => new SelectListItem { Text = m.CityDesc, Value = m.ID.ToString() }), htmlAttributes: new { @class = "form-control select2" })
                        @*@Html.ValidationMessageFor(model => model.PortOfOriginID, null , new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Port Of Destination</label>
                    <div class="col-sm-9 btn-danger">
                        @Html.DropDownListFor(model => model.DestinationID, ((IEnumerable<Travel_Request_System_EF.Models.City>)ViewBag.Cities).Select(m => new SelectListItem { Text = m.CityDesc, Value = m.ID.ToString() }), htmlAttributes: new { @class = "form-control select2" })
                        @*@Html.ValidationMessageFor(model => model.PortOfOriginID, null , new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Departure Date</label>
                    <div class="col-sm-9 btn-danger">
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            @Html.EditorFor(model => model.DepartureDate, new { htmlAttributes = new { @class = "form-control datepicker" } })
                            @*@Html.ValidationMessageFor(model => model.DepartureDate, null, new { @class = "text-danger" })*@
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Return Date</label>
                    <div class="col-sm-9 btn-danger">
                        <div class="input-group date">
                            <div class="input-group-addon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            @Html.EditorFor(model => model.ReturnDate, new { htmlAttributes = new { @class = "form-control datepicker" } })
                            @*@Html.ValidationMessageFor(model => model.ReturnDate, null, new { @class = "text-danger" })*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Preferred Departure Time</label>
                    <div class="col-sm-9">
                        <div class="bootstrap-timepicker">
                            <div class="input-group time">
                                <div class="input-group-addon">
                                    <i class="fa fa-clock-o"></i>
                                </div>
                                @Html.EditorFor(model => model.DepartureTime, new { htmlAttributes = new { @class = "form-control  timepicker", @name = "departureTime" } })
                                @*@Html.ValidationMessageFor(model => model.DepartureTime, null, new { @class = "text-danger" })*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Preferred Return Time</label>
                    <div class="col-sm-9">
                        <div class="bootstrap-timepicker">
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-clock-o"></i>
                                </div>
                                @Html.EditorFor(model => model.ReturnTime, new { htmlAttributes = new { @class = "form-control  timepicker", @name = "returnTime" } })
                                @*@Html.ValidationMessageFor(model => model.ReturnTime, null, new { @class = "text-danger" })*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Airlines</label>
                    <div class="col-sm-9">
                        @Html.EditorFor(model => model.Airlines, new { htmlAttributes = new { @class = "form-control" } })
                        @*@Html.ValidationMessageFor(model => model.DailyAllowance, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Ticket No</label>
                    <div class="col-sm-9 btn-danger">
                        @Html.EditorFor(model => model.TicketNo, new { htmlAttributes = new { @class = "form-control" } })
                        @*@Html.ValidationMessageFor(model => model.CurrencyID, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
        </div>
        <div class="row" style="margin-bottom:15px">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Ticket Np</label>
                    <div class="col-sm-9 btn-danger">
                        @Html.EditorFor(model => model.TicketNo, new { htmlAttributes = new { @class = "form-control" } })
                        @*@Html.ValidationMessageFor(model => model.CurrencyID, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-3">Amount</label>
                    <div class="col-sm-9">
                        @Html.EditorFor(model => model.Amount, new { htmlAttributes = new { @class = "form-control", @type = "number", @min = "0", @step = "1.00", @Value = "0.00" } })
                        @*@Html.ValidationMessageFor(model => model.DailyAllowance, null, new { @class = "text-danger" })*@
                    </div>
                </div>
            </div>
        </div>

        @using (Html.BeginForm("FileUpload", "Quotation", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            <div class="row" style="margin-bottom:15px">
                <div class="col-sm-6">
                    <div class="form-group">
                        <label class="col-sm-3">Attachment</label>
                        <div class="col-sm-9">
                            <input type="file" class="btn btn-default" id="filenames" name="file" />
                        </div>
                    </div>
                </div><div class="col-sm-6">
                    <button type="submit" name="Save" class="btn btn-info">Upload Files</button>
                </div>
            </div>
        }
        @if (ViewBag.fileUploader != null && ViewBag.fileUploader.Count > 0)
        {
            <div class="row" style="margin-bottom:15px">
                <aside class="right-side">
                    <!-- Main content -->
                    <section class="content">
                        <div class="container text-center">
                            <div class="col-xs-11">
                                <div class="box with-border">
                                    <div class="box-header">
                                        <h3 class="box-title">Details</h3>
                                    </div><!-- /.box-header -->
                                    <div class="box-body table-responsive">
                                        <table id="uloadTable" class="table table-bordered table-hover table-responsive">
                                            <thead>
                                                <tr>
                                                    <th>File Name</th>
                                                    <th>Uploaded Date</th>
                                                    <th>Uploaded By</th>
                                                    <th></th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in (List<Travel_Request_System_EF.Models.Attachments>)ViewBag.fileUploader)
                                                {
                                                    <tr id="@item.FileName">
                                                        <td>@item.FileName</td>
                                                        <td>@item.UploadedDate.ToShortDateString()</td>
                                                        <td>@(new HtmlString(item.Users.FirstName + " " + item.Users.LastName))</td>
                                                        <td style="text-align: center">
                                                            @Html.ActionLink("  Open File", "OpenFile", new { fileName = item.FileName }, new { @class = "form-control btn btn-info glyphicon-edit" })
                                                        </td>
                                                        <td>

                                                            @using (Html.BeginForm("RemoveUploadFile", "Quotation", new { fileName = item.FileName }, FormMethod.Post, new { enctype = "multipart/form-data" }))
                                                            {
                                                                @Html.AntiForgeryToken()
                                                                <button type="submit" class="form-control btn btn-info glyphicon-edit">Delete File</button>
                                                            }
                                                        </td>
                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </aside>
            </div>
        }

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Quotations", new { Model.Quotation.TravelRequestID})
</div>
